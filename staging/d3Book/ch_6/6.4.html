<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Practice Exercise</title>

        <!-- Load D3 -->
        <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
        <!-- CSS -->
        <style>
            /*Style goes here*/
        </style>
    </head>
    <body>

        <!-- D3 code -->
        <script type="text/javascript">
            var dataset = [ 5, 10, 13, 19, 21, 25, 22, 18, 15, 13,
                    11, 12, 15, 20, 18, 17, 16, 18, 23, 25 ];
            var chartW = 500;
            var chartH = 100;
            var barPadding = 1;

            chart = d3.select("body")
                .append("svg")
                .attr("width", chartW)
                .attr("height", chartH);

            circles = chart.selectAll("rect")
                .data(dataset)
                .enter()
                .append("rect")
                // Verbose declaration

                // .attr("x", function(d, i) {
                //     return i * (chartW/dataset.length);
                // })
                // .attr("y", function(d) {
                //     return chartH - (d *3);
                // })
                // .attr("width", chartW/dataset.length - barPadding)
                // .attr("height", function(d) {
                //     return d * 3;
                // })
                // .attr("fill", function(d) {
                //     return "rgb(0, 0," + d * 10 + ")" ;
                // });

                // Multivalue Map!
                .attr({
                    x: function(d, i) {
                        return i* chartW/dataset.length;
                    },
                    y: function(d) {
                        return chartH - (d * 3)
                    },
                    width: chartW/dataset.length - barPadding,
                    height: function(d) {
                        return d * 3;
                    },
                    fill: function(d) {
                        return "rgb(0,0," + d*10 + ")";
                    }
                });

            labels = chart.selectAll("text")
                .data(dataset)
                .enter()
                .append("text")
                .text(function(d) {
                    return d;
                })
                .attr({
                    "x": function(d, i) {
                        return i * (chartW/dataset.length) + (chartW / dataset.length - barPadding)/2 ;
                    },
                    "y": function(d) {
                        return chartH - (d * 3) + 12;
                    },
                    "text-anchor": "middle",
                    "font-family": "sans-serif",
                    "font-size": "11px",
                    "fill": "white"
                });

        </script>
    </body>
</html>
