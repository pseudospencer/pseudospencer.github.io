<!DOCTYPE html>
<html>

<head>
    <!-- Based on this tutorial: https://bost.ocks.org/mike/bar/2/ -->
    <meta charset="utf-8">
    <title>Visual Job Search D3</title>
    <link rel="stylesheet" type="text/css" href="vjs_style.css">
</head>

<body>
    <!--  Chart goes in here  -->
    <svg class="chart1"></svg>

    <!-- Load D3 -->
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <!-- Script for chart 1 -->
    <script>
        var width = 420;
        barHeight = 20;

        var x = d3.scale.linear()
            .range([0, width]);

        var chart1 = d3.select(".chart1") // create a new element
            .attr("width", width) // width = "width"

        d3.csv("jobs_data_master_v1_10.30.16.csv", type, function(error, data) {
            x.domain([0, d3.max(data, function(d) {
                return d['overallRating']
            })]);

            chart1.attr("height", barHeight * data.length);

            var bar = chart1.selectAll("g") //selector for all the bar elements that will be created
                .data(data) // load data from data
                .enter().append("g") // "create" a bar element
                .attr("transform", function(d, i) {
                    return "translate(0," + i * barHeight + ")";
                }); // create a transorm attr that translates from upper corner the proper amount to render the bar

            bar.append("rect")
                .attr("width", function(d) {
                    return x(d['overallRating']);
                }) // use the x function to get width
                .attr("height", barHeight - 1); // height 19

            bar.append("text")
                .attr("x", function(d) {
                    return x(d['overallRating']) - 3;
                })
                .attr("y", barHeight / 2)
                .attr("dy", ".35em")
                .text(function(d) {
                    return d['overallRating'];
                });
        });

        function type(d) {
            d['overallRating'] = +d['overallRating'];
            return d;
        }
    </script>
</body>

</html>
